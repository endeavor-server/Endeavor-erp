import type { Contact, Lead, Deal, Task, Activity, DashboardStats } from '../types';

export const mockContacts: Contact[] = [
  {
    id: '1',
    first_name: 'John',
    last_name: 'Smith',
    email: 'john.smith@techcorp.com',
    phone: '+1 (555) 123-4567',
    company: 'TechCorp Inc.',
    position: 'CEO',
    status: 'active',
    source: 'Website',
    notes: 'Key decision maker, interested in enterprise plan',
    created_at: '2024-01-15T10:30:00Z',
    updated_at: '2024-01-15T10:30:00Z',
  },
  {
    id: '2',
    first_name: 'Sarah',
    last_name: 'Johnson',
    email: 'sarah.j@innovate.co',
    phone: '+1 (555) 234-5678',
    company: 'Innovate Solutions',
    position: 'Marketing Director',
    status: 'lead',
    source: 'LinkedIn',
    notes: 'Looking for marketing automation tools',
    created_at: '2024-01-16T14:20:00Z',
    updated_at: '2024-01-16T14:20:00Z',
  },
  {
    id: '3',
    first_name: 'Michael',
    last_name: 'Chen',
    email: 'm.chen@globaltech.com',
    phone: '+1 (555) 345-6789',
    company: 'Global Tech Ventures',
    position: 'CTO',
    status: 'active',
    source: 'Referral',
    notes: 'Technical lead, evaluating API capabilities',
    created_at: '2024-01-17T09:15:00Z',
    updated_at: '2024-01-17T09:15:00Z',
  },
  {
    id: '4',
    first_name: 'Emily',
    last_name: 'Davis',
    email: 'emily.davis@startups.io',
    phone: '+1 (555) 456-7890',
    company: 'StartupXYZ',
    position: 'Founder',
    status: 'lead',
    source: 'Conference',
    notes: 'Early stage startup, budget-conscious',
    created_at: '2024-01-18T11:00:00Z',
    updated_at: '2024-01-18T11:00:00Z',
  },
  {
    id: '5',
    first_name: 'Robert',
    last_name: 'Wilson',
    email: 'robert.w@enterprise.com',
    phone: '+1 (555) 567-8901',
    company: 'Enterprise Solutions Ltd.',
    position: 'VP Sales',
    status: 'active',
    source: 'Cold Email',
    notes: 'Interested in sales team package',
    created_at: '2024-01-19T16:45:00Z',
    updated_at: '2024-01-19T16:45:00Z',
  },
  {
    id: '6',
    first_name: 'Lisa',
    last_name: 'Anderson',
    email: 'lisa.anderson@digital.com',
    phone: '+1 (555) 678-9012',
    company: 'Digital Dynamics',
    position: 'Product Manager',
    status: 'inactive',
    source: 'Website',
    notes: 'Previously interested, went quiet',
    created_at: '2024-01-10T13:30:00Z',
    updated_at: '2024-01-20T10:00:00Z',
  },
];

export const mockLeads: Lead[] = [
  {
    id: '1',
    contact_id: '2',
    contact: mockContacts[1],
    status: 'qualified',
    priority: 'high',
    value: 25000,
    source: 'LinkedIn',
    assigned_to: 'User',
    expected_close_date: '2024-03-15',
    notes: 'Qualified lead, ready for proposal',
    created_at: '2024-01-16T14:20:00Z',
    updated_at: '2024-02-01T10:00:00Z',
  },
  {
    id: '2',
    contact_id: '4',
    contact: mockContacts[3],
    status: 'new',
    priority: 'medium',
    value: 8000,
    source: 'Conference',
    assigned_to: 'User',
    expected_close_date: '2024-04-01',
    notes: 'New lead, needs nurturing',
    created_at: '2024-01-18T11:00:00Z',
    updated_at: '2024-01-18T11:00:00Z',
  },
  {
    id: '3',
    contact_id: '1',
    contact: mockContacts[0],
    status: 'negotiation',
    priority: 'high',
    value: 50000,
    source: 'Website',
    assigned_to: 'User',
    expected_close_date: '2024-02-28',
    notes: 'Enterprise deal in negotiation',
    created_at: '2024-01-15T10:30:00Z',
    updated_at: '2024-02-05T15:30:00Z',
  },
  {
    id: '4',
    contact_id: '5',
    contact: mockContacts[4],
    status: 'proposal',
    priority: 'medium',
    value: 15000,
    source: 'Cold Email',
    assigned_to: 'User',
    expected_close_date: '2024-03-01',
    notes: 'Proposal sent, awaiting feedback',
    created_at: '2024-01-19T16:45:00Z',
    updated_at: '2024-02-03T14:00:00Z',
  },
  {
    id: '5',
    contact_id: '3',
    contact: mockContacts[2],
    status: 'contacted',
    priority: 'high',
    value: 35000,
    source: 'Referral',
    assigned_to: 'User',
    expected_close_date: '2024-03-20',
    notes: 'Initial contact made, technical evaluation ongoing',
    created_at: '2024-01-17T09:15:00Z',
    updated_at: '2024-01-25T11:20:00Z',
  },
];

export const mockDeals: Deal[] = [
  {
    id: '1',
    lead_id: '3',
    lead: mockLeads[2],
    title: 'TechCorp Enterprise Package',
    value: 50000,
    status: 'in_progress',
    probability: 75,
    expected_close_date: '2024-02-28',
    assigned_to: 'User',
    notes: 'Major enterprise deal, technical requirements finalized',
    created_at: '2024-01-20T09:00:00Z',
    updated_at: '2024-02-05T15:30:00Z',
  },
  {
    id: '2',
    lead_id: '1',
    lead: mockLeads[0],
    title: 'Innovate Solutions Marketing Pro',
    value: 25000,
    status: 'in_progress',
    probability: 60,
    expected_close_date: '2024-03-15',
    assigned_to: 'User',
    notes: 'Marketing team expansion deal',
    created_at: '2024-01-22T10:30:00Z',
    updated_at: '2024-02-01T10:00:00Z',
  },
  {
    id: '3',
    lead_id: '5',
    lead: mockLeads[4],
    title: 'Global Tech API Integration',
    value: 35000,
    status: 'pending',
    probability: 40,
    expected_close_date: '2024-03-20',
    assigned_to: 'User',
    notes: 'Custom API integration project',
    created_at: '2024-01-25T14:00:00Z',
    updated_at: '2024-01-25T14:00:00Z',
  },
  {
    id: '4',
    lead_id: '4',
    lead: mockLeads[3],
    title: 'Enterprise Solutions Starter',
    value: 15000,
    status: 'in_progress',
    probability: 50,
    expected_close_date: '2024-03-01',
    assigned_to: 'User',
    notes: 'Sales team starter package',
    created_at: '2024-01-26T11:00:00Z',
    updated_at: '2024-02-03T14:00:00Z',
  },
  {
    id: '5',
    lead_id: '2',
    lead: mockLeads[1],
    title: 'StartupXYZ Growth Plan',
    value: 8000,
    status: 'pending',
    probability: 25,
    expected_close_date: '2024-04-01',
    assigned_to: 'User',
    notes: 'Budget-conscious option needed',
    created_at: '2024-01-28T16:00:00Z',
    updated_at: '2024-01-28T16:00:00Z',
  },
  {
    id: '6',
    lead_id: '1',
    lead: mockLeads[0],
    title: 'Previous Deal - Closed Won',
    value: 12000,
    status: 'won',
    probability: 100,
    expected_close_date: '2024-01-15',
    actual_close_date: '2024-01-15',
    assigned_to: 'User',
    notes: 'Successfully closed',
    created_at: '2024-01-01T09:00:00Z',
    updated_at: '2024-01-15T17:00:00Z',
  },
];

export const mockTasks: Task[] = [
  {
    id: '1',
    title: 'Follow up with TechCorp',
    description: 'Send updated proposal with enterprise features',
    status: 'pending',
    priority: 'high',
    due_date: '2024-02-10T17:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'deal', id: '1' },
    created_at: '2024-02-05T10:00:00Z',
    updated_at: '2024-02-05T10:00:00Z',
  },
  {
    id: '2',
    title: 'Schedule demo for Innovate Solutions',
    description: 'Prepare marketing automation demo',
    status: 'in_progress',
    priority: 'high',
    due_date: '2024-02-08T14:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'lead', id: '1' },
    created_at: '2024-02-04T09:00:00Z',
    updated_at: '2024-02-06T11:00:00Z',
  },
  {
    id: '3',
    title: 'Prepare API documentation',
    description: 'Technical specs for Global Tech review',
    status: 'pending',
    priority: 'medium',
    due_date: '2024-02-12T12:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'deal', id: '3' },
    created_at: '2024-02-05T14:00:00Z',
    updated_at: '2024-02-05T14:00:00Z',
  },
  {
    id: '4',
    title: 'Send contract to Enterprise Solutions',
    description: 'Finalize and send sales agreement',
    status: 'completed',
    priority: 'medium',
    due_date: '2024-02-05T17:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'deal', id: '4' },
    created_at: '2024-02-01T10:00:00Z',
    updated_at: '2024-02-05T16:30:00Z',
  },
  {
    id: '5',
    title: 'Research StartupXYZ competitors',
    description: 'Competitive analysis for proposal',
    status: 'pending',
    priority: 'low',
    due_date: '2024-02-15T17:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'lead', id: '2' },
    created_at: '2024-02-06T09:00:00Z',
    updated_at: '2024-02-06T09:00:00Z',
  },
  {
    id: '6',
    title: 'Call Lisa Anderson - Re-engagement',
    description: 'Check if still interested in our services',
    status: 'pending',
    priority: 'low',
    due_date: '2024-02-09T11:00:00Z',
    assigned_to: 'User',
    related_to: { type: 'contact', id: '6' },
    created_at: '2024-02-07T10:00:00Z',
    updated_at: '2024-02-07T10:00:00Z',
  },
  {
    id: '7',
    title: 'Weekly pipeline review',
    description: 'Review all active deals and leads',
    status: 'pending',
    priority: 'high',
    due_date: '2024-02-09T16:00:00Z',
    assigned_to: 'User',
    created_at: '2024-02-08T09:00:00Z',
    updated_at: '2024-02-08T09:00:00Z',
  },
];

export const mockActivities: Activity[] = [
  {
    id: '1',
    type: 'call',
    description: 'Discussed enterprise requirements with John Smith',
    related_to: { type: 'contact', id: '1', name: 'John Smith' },
    created_by: 'User',
    created_at: '2024-02-05T14:30:00Z',
  },
  {
    id: '2',
    type: 'email',
    description: 'Sent proposal to Innovate Solutions',
    related_to: { type: 'lead', id: '1', name: 'Sarah Johnson' },
    created_by: 'User',
    created_at: '2024-02-04T16:00:00Z',
  },
  {
    id: '3',
    type: 'meeting',
    description: 'Technical demo with Michael Chen',
    related_to: { type: 'contact', id: '3', name: 'Michael Chen' },
    created_by: 'User',
    created_at: '2024-02-03T10:00:00Z',
  },
  {
    id: '4',
    type: 'note',
    description: 'Updated deal value for TechCorp to $50K',
    related_to: { type: 'deal', id: '1', name: 'TechCorp Enterprise Package' },
    created_by: 'User',
    created_at: '2024-02-02T11:30:00Z',
  },
  {
    id: '5',
    type: 'task',
    description: 'Completed contract review',
    related_to: { type: 'deal', id: '4', name: 'Enterprise Solutions Starter' },
    created_by: 'User',
    created_at: '2024-02-01T15:00:00Z',
  },
];

export const calculateDashboardStats = (): DashboardStats => {
  const wonDeals = mockDeals.filter(d => 
    d.status === 'won' && 
    new Date(d.actual_close_date || '').getMonth() === new Date().getMonth()
  );
  
  const pendingTasks = mockTasks.filter(t => t.status === 'pending');
  const overdueTasks = pendingTasks.filter(t => 
    new Date(t.due_date || '') < new Date()
  );
  
  return {
    totalContacts: mockContacts.length,
    totalLeads: mockLeads.length,
    totalDeals: mockDeals.length,
    totalRevenue: mockDeals
      .filter(d => d.status === 'won')
      .reduce((sum, d) => sum + d.value, 0),
    activeDeals: mockDeals.filter(d => d.status === 'in_progress').length,
    wonDealsThisMonth: wonDeals.length,
    tasksPending: pendingTasks.length,
    tasksOverdue: overdueTasks.length,
  };
};

// Local storage keys
export const STORAGE_KEYS = {
  contacts: 'crm_contacts',
  leads: 'crm_leads',
  deals: 'crm_deals',
  tasks: 'crm_tasks',
};

// Initialize local storage with mock data
export const initializeMockData = () => {
  if (!localStorage.getItem(STORAGE_KEYS.contacts)) {
    localStorage.setItem(STORAGE_KEYS.contacts, JSON.stringify(mockContacts));
  }
  if (!localStorage.getItem(STORAGE_KEYS.leads)) {
    localStorage.setItem(STORAGE_KEYS.leads, JSON.stringify(mockLeads));
  }
  if (!localStorage.getItem(STORAGE_KEYS.deals)) {
    localStorage.setItem(STORAGE_KEYS.deals, JSON.stringify(mockDeals));
  }
  if (!localStorage.getItem(STORAGE_KEYS.tasks)) {
    localStorage.setItem(STORAGE_KEYS.tasks, JSON.stringify(mockTasks));
  }
};
