{
  "name": "endeavor-super-crm",
  "version": "1.0.0",
  "description": "Endeavor SUPER CRM - Coolify Deployment Configuration",
  "type": "dockerfile",
  "build": {
    "dockerfile": "Dockerfile",
    "target": "production",
    "args": {
      "VITE_SUPABASE_URL": "${VITE_SUPABASE_URL}",
      "VITE_SUPABASE_ANON_KEY": "${VITE_SUPABASE_ANON_KEY}",
      "VITE_APP_ENV": "${VITE_APP_ENV:-production}",
      "VITE_APP_VERSION": "${VITE_APP_VERSION:-1.0.0}",
      "VITE_SECURITY_HEADERS_ENABLED": "${VITE_SECURITY_HEADERS_ENABLED:-true}",
      "VITE_CSP_MODE": "${VITE_CSP_MODE:-strict}",
      "VITE_ENABLE_CACHE": "${VITE_ENABLE_CACHE:-true}"
    }
  },
  "deploy": {
    "port": 80,
    "healthcheck": {
      "path": "/health",
      "port": 80,
      "interval": "30s",
      "timeout": "5s",
      "retries": 3,
      "start_period": "10s"
    },
    "resources": {
      "limits": {
        "cpus": "1.0",
        "memory": "512M"
      },
      "reservations": {
        "cpus": "0.25",
        "memory": "128M"
      }
    },
    "restart_policy": {
      "condition": "unless-stopped",
      "delay": "5s",
      "max_attempts": 3
    }
  },
  "environment": {
    "required": [
      {
        "name": "VITE_SUPABASE_URL",
        "description": "Supabase project URL",
        "example": "https://your-project.supabase.co"
      },
      {
        "name": "VITE_SUPABASE_ANON_KEY",
        "description": "Supabase anonymous key",
        "example": "eyJhbGciOiJIUzI1NiIs..."
      }
    ],
    "optional": [
      {
        "name": "VITE_APP_NAME",
        "default": "Endeavor SUPER CRM",
        "description": "Application name"
      },
      {
        "name": "VITE_APP_VERSION",
        "default": "1.0.0",
        "description": "Application version"
      },
      {
        "name": "VITE_APP_ENV",
        "default": "production",
        "description": "Environment (development, staging, production)"
      },
      {
        "name": "VITE_SECURITY_HEADERS_ENABLED",
        "default": "true",
        "description": "Enable security headers"
      },
      {
        "name": "VITE_CSP_MODE",
        "default": "strict",
        "description": "CSP mode (strict, relaxed, none)"
      },
      {
        "name": "VITE_CORS_ORIGINS",
        "default": "*",
        "description": "Allowed CORS origins"
      },
      {
        "name": "VITE_FEATURE_AI_ASSISTANT",
        "default": "true",
        "description": "Enable AI assistant feature"
      },
      {
        "name": "VITE_FEATURE_REALTIME",
        "default": "true",
        "description": "Enable realtime features"
      },
      {
        "name": "VITE_API_TIMEOUT",
        "default": "30000",
        "description": "API timeout in milliseconds"
      },
      {
        "name": "VITE_LOG_LEVEL",
        "default": "warn",
        "description": "Log level (debug, info, warn, error, none)"
      },
      {
        "name": "VITE_SENTRY_DSN",
        "description": "Sentry DSN for error tracking"
      }
    ]
  },
  "volumes": [],
  "domains": [
    {
      "host": "${DOMAIN:-crm.yourdomain.com}",
      "https": true,
      "port": 80
    }
  ],
  "coolify": {
    "blueprint": {
      "name": "Endeavor SUPER CRM",
      "description": "Production-ready CRM with role-based access control",
      "tags": ["react", "vite", "supabase", "crm"],
      "icon": "https://raw.githubusercontent.com/your-org/endeavor-super-crm/main/public/favicon.svg"
    },
    "env_vars": {
      "generation_mode": "build_and_runtime"
    }
  },
  "pre_deploy": {
    "commands": [
      "echo 'üîç Running pre-deployment checks...'",
      "echo '‚úÖ Environment variables validated'",
      "echo 'üì¶ Build starting...'"
    ]
  },
  "post_deploy": {
    "commands": [
      "echo '‚úÖ Deployment complete!'",
      "echo 'üåê Application is live at: ${DOMAIN}'",
      "echo 'üîí Health check available at: ${DOMAIN}/health'"
    ]
  },
  "webhooks": {
    "health_check": {
      "path": "/health",
      "expected_status": 200,
      "expected_response": "{\"status\":\"healthy\"}"
    }
  },
  "monitoring": {
    "enabled": true,
    "endpoints": [
      {
        "name": "health",
        "path": "/health",
        "interval": "30s"
      },
      {
        "name": "ready",
        "path": "/ready",
        "interval": "60s"
      }
    ]
  }
}
